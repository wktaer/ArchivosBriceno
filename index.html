<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Archivos Briceño</title>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');

    :root {
      --primary-color: #0061fe;
      --hover-color: #0056e4;
      --background-color: #f8fafc;
      --text-color: #1e293b;
      --border-radius: 12px;
      --transition: all 0.3s ease;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--background-color);
      margin: 0;
      padding: 0;
      color: var(--text-color);
      line-height: 1.6;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }

    #particles-js {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      pointer-events: none;
    }

    .container {
      position: relative;
      z-index: 2;
      max-width: 800px;
      margin: auto;
      background: rgba(255, 255, 255, 0.95);
      padding: 40px;
      border-radius: var(--border-radius);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
      backdrop-filter: blur(8px);
      transition: var(--transition);
    }

    .container:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
    }

    .file-card {
      background: rgba(255, 255, 255, 0.8);
      padding: 24px;
      border-radius: var(--border-radius);
      text-align: center;
      border: 1px solid rgba(226, 232, 240, 0.6);
      transition: var(--transition);
      backdrop-filter: blur(4px);
    }

    .file-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.15);
      background: rgba(255, 255, 255, 0.95);
    }
    .header {
      text-align: center;
      padding: 60px 20px;
      position: relative;
      z-index: 2;
      background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.85) 100%);
      margin-bottom: 40px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .header h1 {
      margin: 0;
      font-size: 2.8rem;
      color: var(--primary-color);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
    }

    .header p {
      margin: 15px 0 0;
      font-size: 1.2rem;
      color: var(--text-color);
      opacity: 0.8;
    }

    h1 {
      text-align: center;
      color: var(--text-color);
      font-size: 2.2rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
    }

    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 40px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    input[type="file"] {
      display: block;
      width: 100%;
      max-width: 400px;
      margin: 24px auto;
      padding: 12px;
      border: 2px dashed #cbd5e1;
      border-radius: var(--border-radius);
      transition: var(--transition);
      cursor: pointer;
    }

    input[type="file"]:hover {
      border-color: var(--primary-color);
    }

    button {
      background-color: var(--primary-color);
      color: white;
      padding: 12px 28px;
      border: none;
      border-radius: var(--border-radius);
      cursor: pointer;
      font-size: 1rem;
      font-weight: 500;
      display: block;
      margin: 0 auto;
      transition: var(--transition);
    }

    button:hover {
      background-color: var(--hover-color);
      transform: translateY(-1px);
    }

    .file-list {
      margin-top: 40px;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 24px;
    }

    .file-card {
      background: white;
      padding: 20px;
      border-radius: var(--border-radius);
      text-align: center;
      border: 1px solid #e2e8f0;
      transition: var(--transition);
    }

    .file-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }

    .file-card img {
      max-width: 100%;
      max-height: 180px;
      border-radius: calc(var(--border-radius) - 4px);
      margin-bottom: 16px;
      object-fit: cover;
    }

    .file-card a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      display: block;
      padding: 8px;
      transition: var(--transition);
    }

    .file-card a:hover {
      color: var(--hover-color);
    }

    .error {
      color: #ef4444;
      text-align: center;
      margin-top: 20px;
      padding: 12px;
      background: #fef2f2;
      border-radius: var(--border-radius);
      font-size: 0.9rem;
    }
    .success {
      background-color: #d4edda;
      color: #155724;
      padding: 12px;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
      animation: fadeInOut 3s ease-in-out;
    }

    @keyframes fadeInOut {
      0% { opacity: 0; transform: translateY(-20px); }
      10% { opacity: 1; transform: translateY(0); }
      90% { opacity: 1; transform: translateY(0); }
      100% { opacity: 0; transform: translateY(-20px); }
    }
  </style>
</head>
<body>
  <div id="particles-js"></div>
  <div id="login-container" class="container">
    <h1>Acceso a Jota File Manager</h1>
    <input type="password" id="accessPinInput" placeholder="Ingrese PIN de acceso" style="display: block; width: 100%; max-width: 400px; margin: 24px auto; padding: 12px; border: 2px dashed #cbd5e1; border-radius: var(--border-radius); transition: var(--transition); cursor: pointer;" />
    <button onclick="validateAccessPin()">Acceder</button>
    <div id="accessError" class="error"></div>
  </div>
  <div id="main-content" style="display: none;">
    <header class="header">
      <h1>Jota File Manager</h1>
      <p>Copyright - jota 2025</p>
    </header>
    <div class="container">
      <input type="file" id="fileInput" />
      <input type="password" id="pinInput" placeholder="Ingrese PIN" style="display: block; width: 100%; max-width: 400px; margin: 24px auto; padding: 12px; border: 2px dashed #cbd5e1; border-radius: var(--border-radius); transition: var(--transition); cursor: pointer;" />
      <button onclick="uploadFile()">Subir Archivo</button>
      <div id="error" class="error"></div>
      <div class="file-list" id="fileList"></div>
    </div>
  </div>
  <script>
    const ACCESS_PIN = "123456"; // PIN de acceso a la página

    function validateAccessPin() {
      const accessPinInput = document.getElementById('accessPinInput');
      const enteredAccessPin = accessPinInput.value;

      if (enteredAccessPin !== ACCESS_PIN) {
        document.getElementById('accessError').innerText = "PIN de acceso incorrecto";
        return;
      }

      document.getElementById('login-container').style.display = 'none';
      document.getElementById('main-content').style.display = 'block';
    }
  </script>
</body>
</html>
<script>
const DROPBOX_TOKEN = 'sl.u.AFptTGPRM4fJT8MgeI1_rQngDjPaaLb_fQ4FPO7_KK0X2iQRL_U3YTccqSvuKmQJRyacjDHPWr_rcS53bfd_P_i5wRDHMkXA2P5KSbr4s5a6bOdd0Znvp_1leIpx_SkamHnAjPN7HMSmKiSH1SW_BtVtdpOs3Cvqr34Ci1dMGI0QgvVdRZsbGMGINu_52i_k-qqLJsMD2NDJ8_oXwjSdstp0Hha6IkvMst01aGHNNnSaR-i_OlgP7DEprwUqZzFfQh_Ur9-tQYwjYgqaX31bVojslcc1uKHT3aVNyDtgHPFQ0I49O7LCm_u_Qc2SdlLE28ryvSNXKLFt6Kl4mTnSxfL-fGIXDcElNoDmrhnwhuxbB2L2S8uJKeNBWl7QDySwTKTbvik1VbNZ9fb1f6oT3kcZXynDK1xdP8gpIjDxh0AU1kosDY4ZZf9L7fec_c1WzwpW7bSn3YmMmAtlPZBs35apUIUH08zXxOftaPbGDwBNBM97bBApR0uFvD5U28NSCxhCbkf0Na-_GFHY1F3-Gnz-_0zNxsgrRu7R2EMgZrnJxP9vppw7j9ybE5pbrMU6BA1tYVVLADZwX4zRapBm-YlBM5QRftm-VSECmR4RrLNSk1ZfzuX23mmvtrGBZwAFaYCA-1fP4LPpDcV4dkbMk_yYXjjqXZjr1q6WRMAatsK9w0jUkrtUppCC3R5Y2_sEu3mWr9xdnHclJNeQ1vgH6DEXM5me4cNoN71moo3Ai1z56bHDxOZqrCUDMOPduBKLNvzEXlH_L8lMTS1iWcyw2qyiKCLFQ1ura8GQS9XUDHpBo577GHfdsekkjBMAcW2dWLtJCtbFOdKgK3LOREEKc46LLKaa9QgKcLdZiqpWYcA0tYS07tsAUD5gmL7EDtcbTwkEpao8jdXO4agFwDPuSud-m_aaimszphBTHh_wCSy1EPFvaaUTEZKvaz0_B-BpTdCCcwfUg69iJ9ylMNMc0OGJdtsMDLfygRv-fHZYqKXpESeiRs0Ms2HCIloKk89Ch09Rlp-JLxpzR7ze2Cqu40yFsS43RCSkxOdqDZTKkZPaN60o08EvrlfyqlhRCFa_pGEuogHU0aMHoinv_wdfyrtLwviZIP9XeLWFgl2ko1EMTHuNkQrvyeA6LZEe5IiSRC6m666gqkscInX5jenYi-tXInLnlOIyvH810eloF79Z4KMphqibrxucYLXHoempYdsPpKbKxVnBtzZtfKa1_SS5BMZNTiCpasLdwoZ7GGmxi2iTtVGAFadBwVcFcvKB-PxOYOjacIBfqEz1cF0WWc7LSlffTaRwoIDSIOXpJXOXoF6LnduWSJim1_LLb0jzMsTd07lXUP5Z8ENuBIXjV5oxepN-SvmrUUaOkU1WQLjzBonxQEBbNkfFmYBNpts2xRwcr1k7QGB0T9q2dKId90BR'; // <-- reemplaza por tu token

    const PIN = "161205"; // PIN predefinido

    async function uploadFile() {
      const fileInput = document.getElementById('fileInput');
      const pinInput = document.getElementById('pinInput');
      const file = fileInput.files[0];
      const enteredPin = pinInput.value;

      if (!file) return alert("Selecciona un archivo primero");
      if (enteredPin !== PIN) return alert("PIN incorrecto");

      const filePath = '/' + file.name;

      const response = await fetch("https://content.dropboxapi.com/2/files/upload", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + DROPBOX_TOKEN,
          "Dropbox-API-Arg": JSON.stringify({
            path: filePath,
            mode: "add",
            autorename: true,
            mute: false
          }),
          "Content-Type": "application/octet-stream"
        },
        body: file
      });

      if (!response.ok) {
        const text = await response.text();
        document.getElementById('error').innerText = "Error al subir: " + text;
        return;
      }

      document.getElementById('error').innerText = "";
      fileInput.value = "";
      pinInput.value = "";

      // Mostrar notificación de éxito
      const successNotification = document.createElement('div');
      successNotification.className = 'success';
      successNotification.innerText = 'Archivo subido con éxito';
      document.body.appendChild(successNotification);
      setTimeout(() => successNotification.remove(), 3000);

      // Muestra el archivo
      addFileToList(filePath);
    }

    async function getTemporaryLink(path) {
      const response = await fetch("https://api.dropboxapi.com/2/files/get_temporary_link", {
        method: "POST",
        headers: {
          "Authorization": "Bearer " + DROPBOX_TOKEN,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ path })
      });

      if (!response.ok) {
        const errorText = await response.text();
        console.error("Error de Dropbox:", errorText);
        throw new Error("Fallo al obtener enlace temporal");
      }

      const data = await response.json();
      return data.link;
    }

    async function addFileToList(path) {
      try {
        const link = await getTemporaryLink(path);
        const fileCard = document.createElement("div");
        fileCard.className = "file-card";
    
        const icon = document.createElement("img");
        icon.style.width = "50px";
        icon.style.height = "50px";
        icon.style.marginBottom = "10px";
    
        if (/\.(jpe?g|png|gif|webp)$/i.test(path)) {
          icon.src = "https://images.freeimages.com/fic/images/icons/1637/file_icons_vs_2/256/jpg.png"; // Replace with actual image icon URL
        } else if (/\.py$/i.test(path)) {
          icon.src = "https://www.pngitem.com/pimgs/m/139-1396035_python-logo-lens-flare-python-software-logo-png.png"; // Replace with actual Python icon URL
        } else if (/\.txt$/i.test(path)) {
          icon.src = "https://c3.klipartz.com/pngpicture/228/405/sticker-png-notepad-icons-notepoad-red-thumbnail.png"; // Replace with actual text icon URL
        } else {
          icon.src = "https://example.com/default-icon.png"; // Replace with actual default icon URL
        }
    
        fileCard.appendChild(icon);
    
        const anchor = document.createElement("a");
        anchor.href = link;
        anchor.target = "_blank";
        anchor.textContent = path.split("/").pop();
        fileCard.appendChild(anchor);
    
        const deleteButton = document.createElement("button");
        deleteButton.textContent = "Eliminar";
        deleteButton.onclick = () => deleteFile(path);
        fileCard.appendChild(deleteButton);
        document.getElementById("fileList").prepend(fileCard);
      } catch (err) {
        document.getElementById('error').innerText = "Error al mostrar archivo: " + err.message;
      }
    }

    async function deleteFile(path) {
      const files = JSON.parse(localStorage.getItem('dropboxFiles') || '[]');
      const updatedFiles = files.filter(filePath => filePath !== path);
      localStorage.setItem('dropboxFiles', JSON.stringify(updatedFiles));
      document.getElementById('fileList').innerHTML = '';
      updatedFiles.forEach(filePath => addFileToList(filePath));
    }

    // Configuración de particles.js
    particlesJS('particles-js', {
      particles: {
        number: { value: 80, density: { enable: true, value_area: 800 } },
        color: { value: '#0061fe' },
        shape: { type: 'circle' },
        opacity: { value: 0.5, random: false },
        size: { value: 3, random: true },
        line_linked: { enable: true, distance: 150, color: '#0061fe', opacity: 0.4, width: 1 },
        move: { enable: true, speed: 2, direction: 'none', random: false, straight: false, out_mode: 'out', bounce: false }
      },
      interactivity: {
        detect_on: 'canvas',
        events: { onhover: { enable: true, mode: 'repulse' }, onclick: { enable: true, mode: 'push' }, resize: true },
        modes: { repulse: { distance: 100, duration: 0.4 }, push: { particles_nb: 4 } }
      },
      retina_detect: true
    });

    // Almacenamiento local para mantener los archivos
    const savedFiles = JSON.parse(localStorage.getItem('dropboxFiles') || '[]');
    window.addEventListener('load', () => {
      savedFiles.forEach(filePath => addFileToList(filePath));
    });

    // Modificar addFileToList para guardar archivos
    const originalAddFileToList = addFileToList;
    addFileToList = async (path) => {
      await originalAddFileToList(path);
      const files = JSON.parse(localStorage.getItem('dropboxFiles') || '[]');
      if (!files.includes(path)) {
        files.push(path);
        localStorage.setItem('dropboxFiles', JSON.stringify(files));
      }
    };
  </script>
</body>
</html>
